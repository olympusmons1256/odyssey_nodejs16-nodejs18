{"version":3,"file":"stripe-webhook-handler.js","sourceRoot":"","sources":["../src/stripe-webhook-handler.ts"],"names":[],"mappings":"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"}